<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

<!--
    <link rel="icon" href="lib/3rdParty/bootstrap/favicon.ico">
    <title>Cover Template for Bootstrap</title>
-->
    <link rel="icon" href="favicon.ico">
    <title>Wahana Prestasi Logistik</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
     <link href="assets/css/one.style.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/css/cover.css" rel="stylesheet">
    <link href="assets/css/hover-min.css" rel="stylesheet">
    <link href="assets/css/shortcode_timeline2.css" rel="stylesheet">
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.min.js"></script>

<!--    <link href="assets/css/sticky-footer-navbar.css" rel="stylesheet"> -->
  </head>
<style>
.autocomplete-suggestions { border: 1px solid #999;text-align: left;background: #FFF; overflow: auto; }
/*.autocomplete-suggestion { padding: 2px 5px; white-space: nowrap; overflow: hidden; }*/
.autocomplete-suggestion { padding: 2px 5px; overflow: hidden; }
.autocomplete-selected { background: #F0F0F0; }
.autocomplete-suggestions strong { font-weight: normal; color: #3399FF; }
.autocomplete-group { padding: 2px 5px; }
.autocomplete-group strong { display: block; border-bottom: 1px solid #000; }

/*
.hvr-sweep-to-right::before{
  background: #0202ff;
}
.hvr-sweep-to-right:hover{
  color: white;
}
.demo{
  position: absolute;
  font-size: 10px;
}
*/
</style>
  <body class="text-center">
    <div class="cover-container d-flex w-100 h-100 mx-auto flex-column">
    <nav class="navbar navbar-expand-lg sticky-top">
  <a class="navbar-brand" href="#"><img class="rounded" src="wahana/images/logo-wahana.png"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fa fa-bars" aria-hidden="true"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html">Beranda</a><span >&nbsp;|&nbsp;</span>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html#tariff">Cek Tarif</a><span >&nbsp;|&nbsp;</span>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html#track">Lacak Pengiriman</a><span >&nbsp;|&nbsp;</span>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html#agentloc">Agen Terdekat</a><span >&nbsp;|&nbsp;</span>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="peluang_bisnis.html">Peluang Bisnis</a><span >&nbsp;|&nbsp;</span>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="contactus.html">Hubungi CS</a><span >&nbsp;|&nbsp;</span>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-mastlink hvr-sweep-to-right" href="cgi-bin/dw.cgi">Masuk</a>
      </li>
    </ul>
  </div>
</nav>
      <main role="main" class="inner cover pt-4 main-container mx-auto">
<div id="wahanaCarousel" class="carousel slide" data-ride="carousel">
	<ol class="carousel-indicators">
		<li data-target="#wahanaCarousel" data-slide-to="0" class="active"></li>
		<li data-target="#wahanaCarousel" data-slide-to="1"></li>
		<li data-target="#wahanaCarousel" data-slide-to="2"></li>
		<li data-target="#wahanaCarousel" data-slide-to="3"></li>
		<li data-target="#wahanaCarousel" data-slide-to="4"></li>
		<li data-target="#wahanaCarousel" data-slide-to="5"></li>
	</ol>
	<div class="carousel-inner rounded">
		<div class="carousel-item active">
			<img class="d-block w-100" src="wahana/banners/Ultah-021.jpg">
		</div>
		<div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/Banner_libur-01.jpg">
		</div>
		<div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/web_banner_ramadhan-04.jpg">
		</div>
		<div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/3000_new-01.jpg">
		</div>
		<div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/TOKPED-021.jpg">
		</div>
		<div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/New_Template-06.jpg">
		</div>
    <div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/Web_Banner_BUKALAPAK_REV_1-021.jpg">
		</div>
    <div class="carousel-item">
			<img class="d-block w-100" src="wahana/banners/banner_web_prioritas-01-01-01.jpg">
		</div>
    <div class="carousel-item">
      <img class="d-block w-100" src="wahana/banners/wahana_untuk_dari_indonesia_opsi_1_buat_web-01-01.jpg">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="wahana/banners/JASA_PENGIRIMAN_BARANG-01.jpg">
    </div>
	</div>
	<a class="carousel-control-prev" href="#wahanaCarousel" role="button" data-slide="prev">
		<span class="carousel-control-prev-icon" aria-hidden="true"></span>
		<span class="sr-only">Previous</span>
	</a>
	<a class="carousel-control-next" href="#wahanaCarousel" role="button" data-slide="next">
		<span class="carousel-control-next-icon" aria-hidden="true"></span>
		<span class="sr-only">Next</span>
	</a>
</div>
<div data-spy="scroll" data-target="#navbar-example2" data-offset="0" >
<div id="tariff" class="card bg-transparent mt-2">
<div class="card-body">
			<h4 class="text-center">Cek Tarif</h4>
			<form class="" action="JavaScript:void(0)">
			<div class="form-row">
				<div class="form-group col-sm-3">
					<label class="sr-only" for="serviceId">Service</label>
					<select class="form-control form-control-sm" id="service">
						<option disabled>Pick a Service</option>
						<option value="7">Domestik Normal</option>
						<option value="5">Priority</option>
						<option value="8994">Special Destination</option>
					</select>
				</div>
				<div class="form-group col-sm-3">
					<label class="sr-only">Kota asal</label>
					<input id="calculateFrom" placeholder="Kota asal" class="form-control form-control-sm" type="text">
				</div>
        <div class="form-group col-sm-3">
					<label class="sr-only">Provinsi</label>
					<input id="province" placeholder="Provinsi" class="form-control form-control-sm" type="text">
				</div>
				<div class="form-group col-sm-3">
					<label class="sr-only">Kota tujuan</label>
					<input id="calculateTo" placeholder="Kota Tujuan" class="form-control form-control-sm" type="text">
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-sm-2">
					<label class="sr-only">Weight</label>
					<div class="input-group">
						<input id="calculateWeight" placeholder="Berat" class="form-control form-control-sm" type="text" value="4">
						<div class="input-group-append">
							<span class="input-group-text">KG</span>
						</div>
					</div>
				</div>
					<div class="form-group col-sm-2">
						<label class="sr-only">Length</label>
						<div class="input-group">
							<input id="calculateLength" placeholder="Panjang" class="form-control form-control-sm" type="text" value="4">
							<div class="input-group-append">
								<span class="input-group-text">CM</span>
							</div>
						</div>
					</div>
					<div class="form-group col-sm-2">
						<label class="sr-only">Width</label>
						<div class="input-group">
							<input id="calculateWide" placeholder="Lebar" class="form-control form-control-sm" type="text" value="4">
							<div class="input-group-append">
								<span class="input-group-text">CM</span>
							</div>
						</div>
					</div>
					<div class="form-group col-sm-2">
						<label class="sr-only">Height</label>
						<div class="input-group">
							<input id="calculateHeight" placeholder="Tinggi" class="form-control form-control-sm" type="text" value="4">
							<div class="input-group-append">
								<span class="input-group-text">CM</span>
							</div>
						</div>
					</div>


							<input type="hidden" id="dataAsalId" placeholder="Tinggi" class="form-control form-control-sm" type="text" value="3171">

							<input type="hidden" id="dataTujuanId" placeholder="Tinggi" class="form-control form-control-sm" type="text" value="1106051010">

				<div class="form-group col-sm-4">
					<button  onClick="calculate()" class="btn btn-block btn-index">Hitung !</button>
				</div>
			</div>

      </div>
			</form>
</div>
</div>




  </main>
<style>
.row{
  position: relative;
  left: 20%;
  width: 100%
}
.col-md-12, .col-md-4{
  max-width: none;
  display: inline-grid;
}
.text-button, .btn-btn-primary{
  display: none;
}
label .from-rate-result{
  padding-top: none;
}
</style>
    <div class="modal fade fade bd-example-modal-lg" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Cek tarif</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center" style="max-width:80%;">
        <span id="first-visible" class="text-center"></span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


</div>

      <!-- Bootstrap core JavaScript
      ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
      <script src="https://use.fontawesome.com/2e37f68334.js"></script>
      <script src="assets/js/jquery.autocomplete.min.js"></script>
      <script src="assets/js/main.js"></script>
      <script>window.jQuery || document.write('<script src="lib/3rdParty/bootstrap/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
      <script src="assets/js/popper.min.js"></script>
      <script src="assets/js/bootstrap.min.js"></script>


      <script type="text/javascript">
      function remove_duplicates_safe(arr) {
    var seen = {};
    var ret_arr = [];
    for (var i = 0; i < arr.length; i++) {
        if (!(arr[i] in seen)) {
            ret_arr.push(arr[i]);
            seen[arr[i]] = true;
        }
    }
    return ret_arr;

}
            $('#calculateTo').keypress(function(e) {
                  var from  = $("#dataAsalId").val();
                  if(from.length == 0){
                        $('#alertModal .modal-body').html('Silahkan isi Kota Asal terlebih dahulu!');
                        $('#alertModal').modal('show');
                        return false;
                      }
              });



              function getDataOrigin(callback){
                  $.post("https://wahana.com/Ajaxx/getTariffNodeOriginNew", {}, function(data){
                      // console.log(data);
                      callback(data);
                  });
              }

              // alert(getDataOrigin(returnData));

        		function autoCompletee(){
              getDataOrigin(function(data1) {
              data=JSON.parse(data1);
              var dataArray = $.map(data, function(value, key) {
                return {
                  value: value,
                  data: key
                };
              });

              $('#calculateFrom').autocomplete({
                minChars: 3,
                deferRequestBy: 250,
                noCache : true,
                lookup: dataArray,
                onSelect: function (suggestion) {
                    $("#dataAsalId").val(suggestion.data);
                }
              });

              var options, a;

              $('#province').autocomplete({
                  noCache : true,
                  minChars: 3,
                  dataType : "json",
                  deferRequestBy: 250,
                  serviceUrl: "https://wahana.com/Ajaxx/getTariffNodeDestinationNew",
                  params: {
                      'originNodeId': function() {
                          return $('#dataAsalId').val();
                      },
                      'constraint': function() {
                          return $('#province').val();
                      },
                      'service': function() {
                          return $('#service').val();
                      }
                  },
                  transformResult: function(response) {

                   if(response.length ==0){

                  var service =$("#service").val();
                  var dataAsal  = $("#calculateFrom").val();
                  var dataTujuan  = $("#calculateTo").val();

                  if(service=='7'){
                    servicekirim='Normal';
                  }else if(service=='5'){
                    servicekirim='Prioritas';
                  }else{
                     servicekirim='Khusus';
                  }

                    // $('#alertModal .modal-body').html('Kota Asal  Tujuan Tidak Tersedia');
                    // $('#alertModal').modal('show');

                    $('#alertModal .modal-body').html('Layanan <b>'+servicekirim+'</b> Asal dari <b>'+dataAsal+'</b> ke <b>'+dataTujuan+' </b> Tidak Tersedia');
                    $('#alertModal').modal('show');

                   }else{


                      return {
                          suggestions: $.map(response, function(value, key) {
                            tt = value.split(",")
                            
                            return {
                              value: tt[0],
                              value2 : value,
                              data: key
                            };


                          })
                      };
                    }
                  },
                  onSelect: function (suggestion) {
                      $("#calculateTo").val(suggestion.value);

                  }
              });
              });
        		}
        		autoCompletee();
            function clearcalculate(){
              $("#dataAsalId").val('');
              $("#dataTujuanId").val('');
              $("#calculateTo").val('');
              $("#calculateFrom").val('');
              $("#calculateWeight").val('');

              $("#calculateLength").val('');
              $("#calculateWidth").val('');
              $("#calculateHeight").val('');


            }
            function calculate(){
        var from 	= $("#dataAsalId").val();
        var to 		= $("#dataTujuanId").val();
        var wide 	= $("#calculateWide").val();
        var height 	= $("#calculateHeight").val();
        var weight 	= $("#calculateWeight").val();
        var length 	= $("#calculateLength").val();
        var dataAsal 	= $("#calculateFrom").val();
        var dataTujuan 	= $("#calculateTo").val();
        var service =$("#service").val();

        if(service=='7'){
          servicekirim='Normal';
        }else if(service=='5'){
          servicekirim='Prioritas';
        }else{
           servicekirim='Khusus';
        }


        if(weight.length == 0 || from.length == 0 || to.length == 0  || dataAsal.length == 0 || dataTujuan.length == 0 ){
          alert("Data anda belum lengkap")
          return false;
        }
        $.post( "https://wahana.com/Ajaxx/getTarifHomeNew",
            {'from':from, 'to':to,'height':height,'weight':weight,'length':length,'dataAsal':dataAsal,'dataTujuan':dataTujuan, 'wide':wide,'service':service },
                function() {}).done(function(data){
                  if (data != 0) {
                    $("#exampleModal").modal("show")
                      $('#first-visible').html(data);
                      console.log(data)
                    }
                    else {
                      alert("Layanan tidak tersedia")
                    }
        })
    }
    // reset calculate
    function resetCalculate(){
      $.get("https://wahana.com/Ajaxx/resetCalculate", { }, function(data) {
       $('#first-visible').html(data);
           autoCompletee();
        });
      }



      </script>


    </body>
  </html>
