<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--
    <link rel="icon" href="lib/3rdParty/bootstrap/favicon.ico">
    <title>Cover Template for Bootstrap</title>
-->
  <link rel="icon" href="favicon.ico">
  <title>Wahana Prestasi Logistik</title>

  <!-- Bootstrap core CSS -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/one.style.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="assets/css/cover.css" rel="stylesheet">
  <link href="assets/css/hover-min.css" rel="stylesheet">
  <link href="assets/css/shortcode_timeline2.css" rel="stylesheet">
  <script src="assets/js/jquery-3.3.1.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <!--    <link href="assets/css/sticky-footer-navbar.css" rel="stylesheet"> -->
</head>
<style>
  .autocomplete-suggestions {
    border: 1px solid #999;
    text-align: left;
    background: #FFF;
    overflow: auto;
  }

  /*.autocomplete-suggestion { padding: 2px 5px; white-space: nowrap; overflow: hidden; }*/

  .autocomplete-suggestion {
    padding: 2px 5px;
    overflow: hidden;
  }

  .autocomplete-selected {
    background: #F0F0F0;
  }

  .autocomplete-suggestions strong {
    font-weight: normal;
    color: #3399FF;
  }

  .autocomplete-group {
    padding: 2px 5px;
  }

  .autocomplete-group strong {
    display: block;
    border-bottom: 1px solid #000;
  }

  /*
.hvr-sweep-to-right::before{
  background: #0202ff;
}
.hvr-sweep-to-right:hover{
  color: white;
}
.demo{
  position: absolute;
  font-size: 10px;
}
*/
.html2canvas-container { width: 3000px !important; height: 3000px !important; }
</style>
<body class="text-center">
  <div id="fb-root"></div>

  <div class="cover-container d-flex w-100 h-100 mx-auto flex-column">
    <nav class="navbar navbar-expand-lg sticky-top">
      <a class="navbar-brand" href="#"><img class="rounded" src="wahana/images/logo-wahana.png"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fa fa-bars" aria-hidden="true"></i>
  </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html">Beranda</a><span>&nbsp;|&nbsp;</span>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html#tariff">Cek Tarif</a><span>&nbsp;|&nbsp;</span>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html#track">Lacak Pengiriman</a><span>&nbsp;|&nbsp;</span>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="index.html#agentloc">Agen Terdekat</a><span>&nbsp;|&nbsp;</span>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="peluang_bisnis.html">Peluang Bisnis</a><span>&nbsp;|&nbsp;</span>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="contactus.html">Hubungi CS</a><span>&nbsp;|&nbsp;</span>
          </li>
          <li class="nav-item">
            <a class="nav-link nav-mastlink hvr-sweep-to-right" href="cgi-bin/dw.cgi">Masuk</a>
          </li>
        </ul>
      </div>
    </nav>
    <main role="main" class="inner cover pt-4 main-container mx-auto">
      <div id="wahanaCarousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#wahanaCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#wahanaCarousel" data-slide-to="1"></li>
          <li data-target="#wahanaCarousel" data-slide-to="2"></li>
          <li data-target="#wahanaCarousel" data-slide-to="3"></li>
          <li data-target="#wahanaCarousel" data-slide-to="4"></li>
          <li data-target="#wahanaCarousel" data-slide-to="5"></li>
        </ol>
      </div>
      <div data-spy="scroll" data-target="#navbar-example2" data-offset="0">

      </div>

      <div id="track" class="card bg-transparent">
        <div class="card-body">
          <!--
  <form action="https://wahana.com/index.php/Ajaxx/getTtkNew" target="my-iframe" method="post">

  <label for="text">Some text:</label>
  <input type="text" name="ttk" id="text">

  <input type="submit" value="post">

</form>

<iframe name="my-iframe" src="https://wahana.com/index.php/Ajaxx/getTtkNew"></iframe>
-->
          <h4 class="text-center">Lacak Pengiriman</h4>
          <form class="" action="javascript:void(0)">
            <div class="input-group mb-3">
              <input type="text" id="ttk" class="form-control form-control-sm" placeholder="Masukkan Nomor Resi" aria-label="Waybill Numbers" aria-describedby="basic-addon2">
              <div class="input-group-append">
                <button onClick="trackShiping()" class="btn btn-block btn-index">Lacak</button>
              </div>
            </div>
          </form>
        </div>
      </div>



    </main>
    <style>

    </style>
    <div class="modal fade bd-example-modal-lg" id="modalTracking" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Status pengiriman</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
          </div>
          <div class="modal-body" >
            <nav>
              <div id="err_resi"></div>
            <div class="nav nav-tabs" id="nav-tab" role="tablist" >

            </div>
          </nav>
          <div class="tab-content" id="nav-tabContent">

          </div>
          </div>
          <div class="modal-footer">
            <!-- Sharingbutton Facebook -->
            <button id="btnDownloadLacakResi">Download</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <style>
  .modal-big {
    width: 1000px;
    margin-left: -10px;
}

@media (max-width: 767px) {
    .modal-big {
        width: auto;
        margin-left: auto;
    }
}
  </style>
  <div class="modal fade bd-example-modal-lg" id="modalTrackingtest" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document" style="width:1000px;">
      <div class="modal-content" style="width:140vmin;">
        <div class="modal-header" >
          <h5 class="modal-title" id="exampleModalLabel">Status pengiriman</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
        </div>
        <div class="modal-body" >

        <div class="modal-footer">
          <!-- Sharingbutton Facebook -->
          <button id="btnDownloadLacakResi">Download</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Bootstrap core JavaScript
      ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="https://use.fontawesome.com/2e37f68334.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js"></script>
  <script src="assets/js/jquery.autocomplete.min.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="https://superal.github.io/canvas2image/canvas2image.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script>
    window.jQuery || document.write('<script src="lib/3rdParty/bootstrap/assets/js/vendor/jquery-slim.min.js"><\/script>')
  </script>

  <script>
  $(document).ready(function(){
    //$("#modalTrackingtest").modal("show")
  })
  var htmlSource = $('#nav-tabContent')[0];

$("#btnDownloadLacakResi").mouseup(function(){
  $(".timeline-hasil").removeClass("timeline-hasil")
  htmlSource.scrollIntoView()
  html2canvas(htmlSource, {
   onrendered: function(canvas) {

     // document.body.appendChild(canvas);
     return Canvas2Image.saveAsPNG(canvas);
   }
 });
})
$( "#modalTracking" ).mouseover(function() {
  $(".timeline-v2").addClass("timeline-hasil")
});


  </script>
  <script type="text/javascript">
    // ajax lacak pengiriman
    function trackShiping(){
          var ttk   = $("#ttk").val();
          var t;
          if(ttk.length == 0){
           alert('data anda belum lengkap!');
           return false;
          }
          t = ttk
          regexnya = new RegExp('^[a-zA-Z0-9 ,.-]+$')
          if (!regexnya.test(t)){
            swal({
              type: 'error',
              title: 'Oops...',
              html: '<b>Masukkan Resi Yang Valid Dan Dipisah Dengan Spasi</b>',
            })
            return false
          }
          var chara_split
          chara_split = t.split(/\.|-|,|=|~|\s/)
          var i;
          var data;
    var b = 0
          var stat_resi = false
          var err_resi = []
          for (i=0; i < chara_split.length; i++){
          if (chara_split.length > 10){
            swal({
              type: 'error',
              title: 'Oops...',
              html: 'Nomor Resi Tidak Boleh Dari 10',
            })
            return false;
          }
          $.ajax({
            url : "https://wahana.com/index.php/Ajaxx/getTtkNew2",
            type: "post",
            data : 'ttk='+ ttk,
            success: function(data){

              $("#modalTrackingtest").modal({
                show: true,

              }).addClass('modal-big');
              $('#tab-tracking').tab("show");
              $(".modal-body").html(data)
              $("#nav-tab #tab0").addClass("active show")
              $(".tab-content #tab0").addClass("active show")
              $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                e.preventDefault();

                var ref = $(this).attr('href').replace('#', '');

                $(".tab-content #"+ref).toggleClass('active show').siblings().removeClass('active show');

            });
              $('.modal-body .nav').tab("show");
            },
            beforeSend: function(){
              $("#spinnertrack").removeClass("hidden")
              $("#track").addClass("disabled")
            }
          })
          /*
           $.post( "https://wahana.com/index.php/Ajaxx/getTtkNew",
               {'ttk':chara_split[i] },
                   function() {}).done(function(data){
                     if (data != 0) {

                                var mapObj = {
                                 "Delivered":"Terkirim",
                                 'No TTK':"No Resi",
                                 "Date":"Tanggal",
                                 "Received by" : "Diterima Oleh",
                                 "From":"Dari",
                                 "To":"Ke",
                                 //Replace day
                                 "Monday": "Senin",
                                 "Tuesday": "Selasa",
                                 "Wednesday": "Rabu",
                                 "Thursday":"Kamis",
                                 "Friday": "Jumat",
                                 "Saturday": "Sabtu",
                                 "Sunday": "Minggu",
                              };
                              str = data.replace(/Delivered|No TTK|Date|From|To|Received by|Thursday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday/gi, function(matched){
                                return mapObj[matched];
                              });
                       $("#modalTracking").modal("show");
                       ups = '<a class="nav-item nav-link" id="nav-home-tab" data-toggle="tab" href="#nav'+b+'" role="tab" aria-controls="nav-home" aria-selected="true">'+chara_split[b]+'</a>'
                       cont = '<div class="tab-pane fade" id="nav'+b+'" role="tabpanel" aria-labelledby="nav-profile-tab">'+str+'</div>'
                       $("#nav-tab").append(ups)
                       $("#nav-tabContent").append(cont)

                       $('a[href="#nav0"]').addClass('active show');
                       $('div[id="nav0"]').addClass('active show');
                       b++
                     }
                     else {

                      alert("Resi Tidak Valid")
                     }
           })
           */
          }
          $("#nav-tab").empty()
          $("#nav-tabContent").empty()

          if (stat_resi == true){
            alert("Nomo resi anda salah")
          }
    }

  </script>
</body>

</html>
